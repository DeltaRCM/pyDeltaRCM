
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Defining custom YAML parameters &#8212; pyDeltaRCM 2.1.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Saving custom fields to the output file" href="custom_saving.html" />
    <link rel="prev" title="Changing topographic diffusion to represent tree throw" href="overwrite_topo_diffusion.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="custom_saving.html" title="Saving custom fields to the output file"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overwrite_topo_diffusion.html" title="Changing topographic diffusion to represent tree throw"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyDeltaRCM 2.1.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Examples of using and working with pyDeltaRCM</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Defining custom YAML parameters</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="defining-custom-yaml-parameters">
<h1>Defining custom YAML parameters<a class="headerlink" href="#defining-custom-yaml-parameters" title="Permalink to this heading">Â¶</a></h1>
<p>Custom subclasses for the standard <code class="docutils literal notranslate"><span class="pre">DeltaModel</span></code> may require additional or custom parameters not listed in the <a class="reference internal" href="../reference/model/yaml_defaults.html"><span class="doc">Default Model Variable Values</span></a>.
By using the hook, <a class="reference internal" href="../reference/hook_tools/index.html#pyDeltaRCM.hook_tools.hook_tools.hook_import_files" title="pyDeltaRCM.hook_tools.hook_tools.hook_import_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hook_import_files</span></code></a>, it is straightforward to define custom YAML parameters along with expected types and default values for your subclassed model.</p>
<p>The following subclass model demonstrates this by defining a custom boolean parameter (could be used to toggle some custom functionality on/off), and a custom numeric parameter (could be required for the custom function).</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyDeltaRCM</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CustomParamsModel</span><span class="p">(</span><span class="n">pyDeltaRCM</span><span class="o">.</span><span class="n">DeltaModel</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&quot;&quot;&quot;A subclass of DeltaModel with custom YAML parameters.</span>
<span class="gp">...</span><span class="sd"></span>
<span class="gp">... </span><span class="sd">    This subclass defines custom YAML parameters, their expected types</span>
<span class="gp">... </span><span class="sd">    and default values.</span>
<span class="gp">... </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># inherit base DeltaModel methods</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">hook_import_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="sd">&quot;&quot;&quot;Define the custom YAML parameters.&quot;&quot;&quot;</span>
<span class="gp">... </span>        <span class="c1"># custom boolean parameter</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">subclass_parameters</span><span class="p">[</span><span class="s1">&#39;custom_bool&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;bool&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="kc">False</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># custom numeric parameter</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">subclass_parameters</span><span class="p">[</span><span class="s1">&#39;custom_number&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">],</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="mi">0</span>
<span class="gp">... </span>        <span class="p">}</span>
</pre></div>
</div>
<p>If the subclass model is loaded with a YAML configuration file that does not explicitly define these custom parameters, then the default values will be assigned as model attributes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">defaults</span> <span class="o">=</span> <span class="n">CustomParamsModel</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">defaults</span><span class="o">.</span><span class="n">custom_bool</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">defaults</span><span class="o">.</span><span class="n">custom_number</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since custom YAML parameters have expected types, <code class="docutils literal notranslate"><span class="pre">TypeErrors</span></code> are raised if the custom parameter type provided in the YAML does not agree with what is expected as defined in the subclass.</p>
</div>
<p>Once the custom parameters have been defined in the subclassed model they can be treated just like the default model parameters, and can be specified in the YAML or as keyword arguments (<code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">customized</span> <span class="o">=</span> <span class="n">CustomParamsModel</span><span class="p">(</span><span class="n">custom_bool</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">custom_number</span><span class="o">=</span><span class="mf">15.3</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">customized</span><span class="o">.</span><span class="n">custom_bool</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">customized</span><span class="o">.</span><span class="n">custom_number</span><span class="p">)</span>
<span class="go">15.3</span>
</pre></div>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="overwrite_topo_diffusion.html"
                          title="previous chapter">Changing topographic diffusion to represent tree throw</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="custom_saving.html"
                          title="next chapter">Saving custom fields to the output file</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/examples/custom_yaml.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="custom_saving.html" title="Saving custom fields to the output file"
             >next</a> |</li>
        <li class="right" >
          <a href="overwrite_topo_diffusion.html" title="Changing topographic diffusion to represent tree throw"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyDeltaRCM 2.1.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Examples of using and working with pyDeltaRCM</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Defining custom YAML parameters</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, The DeltaRCM Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.0.
    </div>
  </body>
</html>